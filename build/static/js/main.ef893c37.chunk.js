(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{61:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n(30),s=n.n(a),i=n(6),o=n.n(i),u=n(3),l=n.n(u),j=n(7),p=n(4),b="https://test.neurobica.online",d=Object(c.createContext)();function h(e){var t=Object(c.useState)(void 0),n=Object(p.a)(t,2),a=n[0],s=n[1];function i(){return u.apply(this,arguments)}function u(){return(u=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat(b,"/auth/loggedIn"));case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){i()}),[]),Object(r.jsx)(d.Provider,{value:{user:a,getUser:i},children:e.children})}var O=d,x=n(11),f=n(2);var m=function(e){var t=e.message,n=e.clear;return Object(r.jsxs)("div",{className:"error-message",children:[Object(r.jsx)("p",{children:t}),Object(r.jsx)("button",{onClick:n,children:"Clear"})]})};var v=function(){var e=Object(c.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(p.a)(s,2),u=i[0],d=i[1],h=Object(c.useState)(null),v=Object(p.a)(h,2),g=v[0],w=v[1],y=Object(c.useContext)(O).getUser,S=Object(f.f)();function N(){return(N=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={email:n,password:u},e.prev=2,e.next=5,o.a.post("".concat(b,"/auth/login"),r);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data.errorMessage&&w(e.t0.response.data.errorMessage),e.abrupt("return");case 11:return e.next=13,y();case 13:S.push("/");case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"auth-form",children:[Object(r.jsx)("h2",{children:"Log in"}),g&&Object(r.jsx)(m,{message:g,clear:function(){return w(null)}}),Object(r.jsxs)("form",{className:"form",onSubmit:function(e){return N.apply(this,arguments)},children:[Object(r.jsx)("label",{htmlFor:"form-email",children:"Email"}),Object(r.jsx)("input",{id:"form-email",type:"email",value:n,onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"form-password",children:"Password"}),Object(r.jsx)("input",{id:"form-password",type:"password",value:u,onChange:function(e){return d(e.target.value)}}),Object(r.jsx)("button",{className:"btn-submit",type:"submit",children:"Log in"})]}),Object(r.jsxs)("p",{children:["Don't have an account yet? ",Object(r.jsx)(x.b,{to:"/register",children:"Register here."})]})]})};var g=function(){var e=Object(c.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(p.a)(s,2),u=i[0],d=i[1],h=Object(c.useState)(""),v=Object(p.a)(h,2),g=v[0],w=v[1],y=Object(c.useState)(null),S=Object(p.a)(y,2),N=S[0],C=S[1],k=Object(c.useContext)(O).getUser,D=Object(f.f)();function E(){return(E=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={email:n,password:u,passwordVerify:g},e.prev=2,e.next=5,o.a.post("".concat(b,"/auth/"),r);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data.errorMessage&&C(e.t0.response.data.errorMessage),e.abrupt("return");case 11:return e.next=13,k();case 13:D.push("/");case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"auth-form",children:[Object(r.jsx)("h2",{children:"Register a new account"}),N&&Object(r.jsx)(m,{message:N,clear:function(){return C(null)}}),Object(r.jsxs)("form",{className:"form",onSubmit:function(e){return E.apply(this,arguments)},children:[Object(r.jsx)("label",{htmlFor:"form-email",children:"Email"}),Object(r.jsx)("input",{id:"form-email",type:"email",value:n,onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"form-password",children:"Password"}),Object(r.jsx)("input",{id:"form-password",type:"password",value:u,onChange:function(e){return d(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"form-passwordVerify",children:"Verify password"}),Object(r.jsx)("input",{id:"form-passwordVerify",type:"password",value:g,onChange:function(e){return w(e.target.value)}}),Object(r.jsx)("button",{className:"btn-submit",type:"submit",children:"Register"})]}),Object(r.jsxs)("p",{children:["Already have an account? ",Object(r.jsx)(x.b,{to:"/login",children:"Login instead"})]})]})},w=n(32);var y=function(e){var t=e.snippet,n=e.getSnippets,c=e.editSnippet;function a(){return(a=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this snippet?")){e.next=4;break}return e.next=3,o.a.delete("".concat(b,"/snippet/").concat(t._id));case 3:n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"snippet",children:[t.title&&Object(r.jsx)("h2",{className:"title",children:t.title}),t.description&&Object(r.jsx)("p",{className:"description",children:t.description}),t.code&&Object(r.jsx)("pre",{className:"code",children:Object(r.jsx)("code",{children:t.code})}),Object(r.jsx)("button",{className:"btn-edit",onClick:function(){return c(t)},children:"Edit"}),Object(r.jsx)("button",{className:"btn-delete",onClick:function(){return a.apply(this,arguments)},children:"Delete"})]})};var S=function(e){var t=e.getSnippets,n=e.setSnippetEditorOpen,a=e.editSnippetData,s=Object(c.useState)(""),i=Object(p.a)(s,2),u=i[0],d=i[1],h=Object(c.useState)(""),O=Object(p.a)(h,2),x=O[0],f=O[1],v=Object(c.useState)(""),g=Object(p.a)(v,2),w=g[0],y=g[1],S=Object(c.useState)(null),N=Object(p.a)(S,2),C=N[0],k=N[1];function D(){return(D=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r={title:u||void 0,description:x||void 0,code:w||void 0},e.prev=2,a){e.next=8;break}return e.next=6,o.a.post("".concat(b,"/snippet/"),r);case 6:e.next=10;break;case 8:return e.next=10,o.a.put("".concat(b,"/snippet/").concat(a._id),r);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),e.t0.response&&e.t0.response.data.errorMessage&&k(e.t0.response.data.errorMessage),e.abrupt("return");case 16:t(),E();case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function E(){n(!1),y(""),f(""),d("")}return Object(c.useEffect)((function(){a&&(d(a.title?a.title:""),f(a.description?a.description:""),y(a.code?a.code:""))}),[a]),Object(r.jsxs)("div",{className:"snippet-editor",children:[C&&Object(r.jsx)(m,{message:C,clear:function(){return k(null)}}),Object(r.jsxs)("form",{className:"form",onSubmit:function(e){return D.apply(this,arguments)},children:[Object(r.jsx)("label",{htmlFor:"editor-title",children:"Title"}),Object(r.jsx)("input",{id:"editor-title",type:"text",value:u,onChange:function(e){return d(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"editor-description",children:"Description"}),Object(r.jsx)("input",{id:"editor-description",type:"text",value:x,onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"editor-code",children:"Code"}),Object(r.jsx)("textarea",{id:"editor-code",value:w,onChange:function(e){return y(e.target.value)}}),Object(r.jsx)("button",{className:"btn-save",type:"submit",children:"Save"}),Object(r.jsx)("button",{className:"btn-cancel",type:"button",onClick:E,children:"Cancel"})]})]})};var N=function(){var e=Object(c.useState)([]),t=Object(p.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(p.a)(s,2),u=i[0],d=i[1],h=Object(c.useState)(null),f=Object(p.a)(h,2),m=f[0],v=f[1],g=Object(c.useContext)(O).user;function N(){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat(b,"/snippet/"));case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){v(e),d(!0)}return Object(c.useEffect)((function(){g?N():a([])}),[g]),Object(r.jsxs)("div",{className:"home",children:[!u&&g&&Object(r.jsx)("button",{className:"btn-editor-toggle",onClick:function(){return d(!0)},children:"Add snippet"}),u&&Object(r.jsx)(S,{setSnippetEditorOpen:d,getSnippets:N,editSnippetData:m}),n.length>0?function(){var e=Object(w.a)(n);return(e=e.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))).map((function(e,t){return Object(r.jsx)(y,{snippet:e,getSnippets:N,editSnippet:k},t)}))}():g&&Object(r.jsx)("p",{className:"no-snippets-msg",children:"No snippets have been added yet."}),null===g&&Object(r.jsxs)("div",{className:"no-user-message",children:[Object(r.jsx)("h2",{children:"Welcome to Snippet manager"}),Object(r.jsx)(x.b,{to:"/register",children:"Register here"})]})]})};var C=function(){var e=Object(c.useContext)(O),t=e.user,n=e.getUser;function a(){return(a=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat(b,"/auth/logOut"));case 2:return e.next=4,n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"navbar",children:[Object(r.jsx)(x.b,{to:"/",children:Object(r.jsx)("h1",{className:"title",children:"Snippet manager"})}),null===t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(x.b,{to:"/login",children:"Log in"}),Object(r.jsx)(x.b,{to:"/register",children:"Register"})]}):t&&Object(r.jsx)("button",{className:"btn-logout",onClick:function(){return a.apply(this,arguments)},children:"Log out"})]})};var k=function(){return Object(r.jsxs)(x.a,{children:[Object(r.jsx)(C,{}),Object(r.jsxs)(f.c,{children:[Object(r.jsx)(f.a,{exact:!0,path:"/",children:Object(r.jsx)(N,{})}),Object(r.jsx)(f.a,{path:"/login",children:Object(r.jsx)(v,{})}),Object(r.jsx)(f.a,{path:"/register",children:Object(r.jsx)(g,{})})]})]})};o.a.defaults.withCredentials=!0;var D=function(){return Object(r.jsx)(h,{children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(k,{})})})};s.a.render(Object(r.jsx)(D,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.ef893c37.chunk.js.map